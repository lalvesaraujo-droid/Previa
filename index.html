<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Prévia</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
background:linear-gradient(180deg,#1F3F73,#2E5FA7);
color:#fff;
}

.container{max-width:720px;margin:auto;padding:24px}
.card{
background:#ffffff10;
border-radius:18px;
padding:18px;
margin-bottom:18px;
backdrop-filter:blur(8px);
}

input,select,textarea{
width:100%;
padding:10px;
margin:6px 0 12px 0;
border-radius:10px;
border:none;
font-size:14px;
}

button{
background:#fff;
color:#1F3F73;
border:none;
padding:12px 16px;
border-radius:12px;
font-weight:600;
width:100%;
margin-top:10px;
}

h1{font-size:32px;margin-bottom:4px}
h2{margin:0 0 8px 0}
.step{display:none}
.step.active{display:block}
.nav{display:flex;gap:10px;margin-top:10px}
.small{font-size:12px;color:#ddd}
</style>
</head>

<body>
<div class="container">

<h1>Prévia</h1>
<div class="small">plataforma de avaliação pré-anestésica</div>

<!-- STEP 1 -->
<div class="card step active" id="s1">
<h2>Identificação</h2>
<input id="nome" placeholder="Nome do paciente">
<input id="idade" placeholder="Idade">
<input id="sexo" placeholder="Sexo">
<input id="procedimento" placeholder="Procedimento">
<div class="nav">
<button onclick="next(2)">Próximo</button>
</div>
</div>

<!-- STEP 2 -->
<div class="card step" id="s2">
<h2>Dados clínicos</h2>
<textarea id="comorbidades" placeholder="Comorbidades"></textarea>
<textarea id="medicacoes" placeholder="Medicações"></textarea>
<textarea id="alergias" placeholder="Alergias"></textarea>
<textarea id="cirurgias" placeholder="Passado cirúrgico"></textarea>
<textarea id="intercorrencias" placeholder="Intercorrências anestésicas"></textarea>
<div class="nav">
<button onclick="back(1)">Voltar</button>
<button onclick="next(3)">Próximo</button>
</div>
</div>

<!-- STEP 3 -->
<div class="card step" id="s3">
<h2>Via aérea</h2>
<input id="mallampati" placeholder="Mallampati">
<input id="abertura" placeholder="Abertura oral">
<input id="denticao" placeholder="Dentição">
<input id="mobilidade" placeholder="Mobilidade cervical">
<div class="nav">
<button onclick="back(2)">Voltar</button>
<button onclick="next(4)">Próximo</button>
</div>
</div>

<!-- STEP 4 -->
<div class="card step" id="s4">
<h2>Classificação</h2>
<input id="asa" placeholder="ASA">
<input id="risco" placeholder="Risco anestésico">
<div class="nav">
<button onclick="back(3)">Voltar</button>
<button onclick="next(5)">Próximo</button>
</div>
</div>

<!-- STEP 5 -->
<div class="card step" id="s5">
<h2>Estratégia anestésica</h2>
<textarea id="tecnica" placeholder="Técnica"></textarea>
<textarea id="analgesia" placeholder="Analgesia"></textarea>
<textarea id="profilaxia" placeholder="Profilaxia"></textarea>
<div class="nav">
<button onclick="back(4)">Voltar</button>
<button onclick="next(6)">Próximo</button>
</div>
</div>

<!-- STEP 6 -->
<div class="card step" id="s6">
<h2>Orientações</h2>
<textarea id="jejum" placeholder="Jejum"></textarea>
<textarea id="orientacoes" placeholder="Orientações adicionais"></textarea>
<div class="nav">
<button onclick="back(5)">Voltar</button>
<button onclick="next(7)">Próximo</button>
</div>
</div>

<!-- STEP 7 -->
<div class="card step" id="s7">
<h2>Anexos</h2>
<input type="file" id="fotoPaciente">
<input type="file" id="fotoViaAerea">
<div class="nav">
<button onclick="back(6)">Voltar</button>
<button onclick="next(8)">Próximo</button>
</div>
</div>

<!-- STEP 8 -->
<div class="card step" id="s8">
<h2>Consentimento</h2>
<textarea id="consentimento" placeholder="Texto do consentimento"></textarea>
<div class="nav">
<button onclick="back(7)">Voltar</button>
<button onclick="next(9)">Resumo</button>
</div>
</div>

<!-- STEP 9 -->
<div class="card step" id="s9">
<h2>Resumo</h2>
<div id="resumo"></div>
<button onclick="gerarPDF()">Gerar relatório Prévia</button>
</div>

</div>

<script>
function next(n){
document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'))
document.getElementById('s'+n).classList.add('active')
if(n===9) montarResumo()
}
function back(n){
document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'))
document.getElementById('s'+n).classList.add('active')
}

function montarResumo(){
resumo.innerHTML=`
<b>${nome.value}</b><br>
${procedimento.value}<br>
ASA ${asa.value} — Mallampati ${mallampati.value}<br><br>

<b>Risco:</b> ${risco.value}<br>
<b>Técnica:</b> ${tecnica.value}<br>
<b>Analgesia:</b> ${analgesia.value}<br>
<b>Profilaxia:</b> ${profilaxia.value}<br>
`
}

async function gerarPDF(){
const {jsPDF}=window.jspdf
const pdf=new jsPDF()

pdf.setFillColor(31,63,115)
pdf.rect(0,0,210,60,'F')

pdf.setTextColor(255,255,255)
pdf.setFontSize(28)
pdf.text("Prévia",20,30)

pdf.setFontSize(12)
pdf.text("plataforma de avaliação pré-anestésica",20,40)

pdf.setTextColor(0,0,0)
pdf.setFontSize(14)
pdf.text(nome.value,20,80)
pdf.text(procedimento.value,20,90)
pdf.text("ASA "+asa.value+" Mallampati "+mallampati.value,20,100)

pdf.text("Dados clínicos",20,120)
pdf.text(comorbidades.value,20,130)

pdf.save("Previa.pdf")
}
</script>

</body>
</html>