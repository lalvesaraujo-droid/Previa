<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Prévia</title>
<link rel="stylesheet" href="styles.css">

<style>
.step{display:none}
.step.active{display:block}
.progress{
height:6px;
background:#ffffff20;
border-radius:6px;
margin-bottom:20px;
overflow:hidden
}
.progress-bar{
height:100%;
width:0%;
background:white;
transition:.3s
}
.nav{
display:flex;
justify-content:space-between;
margin-top:20px
}
.nav button{
width:48%
}
textarea{
width:100%;
min-height:160px;
border-radius:12px;
padding:10px;
border:none
}
</style>
</head>

<body>

<!-- SPLASH -->
<section id="splash" class="screen active">
<div class="card">
<div class="brand">Prévia</div>
<p>Avaliação pré-anestésica digital</p>
<button onclick="goHome()">Entrar</button>
</div>
</section>

<!-- HOME -->
<section id="home" class="screen">
<div class="card">
<h2>Home</h2>
<button onclick="start()">Nova avaliação</button>
</div>
</section>

<!-- WIZARD -->
<section id="wizard" class="screen">
<div class="card">

<div class="progress"><div id="bar" class="progress-bar"></div></div>

<!-- STEP 1 -->
<div class="step active">
<h3>Identificação</h3>
<input id="nome" placeholder="Nome">
<input id="idade" placeholder="Idade">
<input id="sexo" placeholder="Sexo">

<input id="peso" placeholder="Peso (kg)" oninput="imc()">
<input id="altura" placeholder="Altura (cm)" oninput="imc()">
<p id="imc">IMC: -</p>

<input id="procedimento" placeholder="Procedimento">
<input id="hospital" placeholder="Hospital">
<input id="data" placeholder="Data">
</div>

<!-- STEP 2 -->
<div class="step">
<h3>Histórico anestésico</h3>
<input id="cirurgias" placeholder="Cirurgias prévias">
<input id="intercorrencias" placeholder="Intercorrências">
<input id="ponv" placeholder="PONV">
<input id="va_dificil" placeholder="Via aérea difícil">
<input id="hm" placeholder="Hipertermia maligna">
</div>

<!-- STEP 3 -->
<div class="step">
<h3>Comorbidades</h3>
<input id="has" placeholder="HAS">
<input id="dm" placeholder="DM">
<input id="cardio" placeholder="Cardiopatia">
<input id="pneumo" placeholder="Pneumopatia">
<input id="saos" placeholder="SAOS">
<input id="outras" placeholder="Outras">
</div>

<!-- STEP 4 -->
<div class="step">
<h3>Medicações</h3>
<input id="uso" placeholder="Uso contínuo">
<input id="anticoag" placeholder="Anticoagulante">
<input id="glp1" placeholder="GLP-1 / Ozempic">
<input id="corticoide" placeholder="Corticoide">
<input id="outros_med" placeholder="Outros">
</div>

<!-- STEP 5 -->
<div class="step">
<h3>Estado atual</h3>
<input id="pa" placeholder="PA">
<input id="fc" placeholder="FC">
<input id="spo2" placeholder="SatO₂">
<input id="met" placeholder="Capacidade funcional (MET)">
<input id="jejum" placeholder="Jejum">
</div>

<!-- STEP 6 -->
<div class="step">
<h3>Via aérea</h3>
<input id="mallampati" placeholder="Mallampati">
<input id="dtm" placeholder="Distância mento-esternal">
<input id="abertura" placeholder="Abertura oral">
<input id="cervical" placeholder="Mobilidade cervical">

<input type="file" id="foto">
<img id="img" style="width:100%;display:none;margin-top:10px;border-radius:10px">
</div>

<!-- STEP 7 -->
<div class="step">
<h3>Exames e risco</h3>
<input id="exames" placeholder="Exames relevantes">
<input id="asa" placeholder="ASA">
<input id="tev" placeholder="Risco TEV">
<input id="sangue" placeholder="Reserva sangue">
<input id="uti" placeholder="Necessidade UTI">
</div>

<!-- STEP 8 -->
<div class="step">
<h3>Conduta</h3>
<input id="condicao" placeholder="Apto / Pendência">
<input id="suspender" placeholder="Suspender">
<input id="manter" placeholder="Manter">
<input id="recom" placeholder="Recomendações">
<textarea id="obs" placeholder="Observações"></textarea>
</div>

<div class="nav">
<button onclick="prev()">Voltar</button>
<button onclick="next()">Próximo</button>
</div>

</div>
</section>

<!-- RESUMO -->
<section id="resumo" class="screen">
<div class="card">
<h2>Resumo anestésico</h2>
<textarea id="texto"></textarea>
<button onclick="copy()">Copiar</button>
<button onclick="goHome()">Home</button>
</div>
</section>

<script>
let step=0
const steps=document.querySelectorAll(".step")
const bar=document.getElementById("bar")

function showStep(){
steps.forEach(s=>s.classList.remove("active"))
steps[step].classList.add("active")
bar.style.width=((step+1)/steps.length*100)+"%"
}

function next(){
if(step<steps.length-1){step++;showStep()}
else gerar()
}

function prev(){
if(step>0){step--;showStep()}
}

function start(){
document.getElementById("splash").classList.remove("active")
document.getElementById("home").classList.remove("active")
document.getElementById("wizard").classList.add("active")
}

function goHome(){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"))
document.getElementById("home").classList.add("active")
}

function imc(){
let p=parseFloat(document.getElementById("peso").value)
let a=parseFloat(document.getElementById("altura").value)/100
if(p&&a)document.getElementById("imc").innerText="IMC: "+(p/(a*a)).toFixed(1)
}

document.getElementById("foto").addEventListener("change",e=>{
let f=e.target.files[0]
if(!f)return
let r=new FileReader()
r.onload=ev=>{
let img=document.getElementById("img")
img.src=ev.target.result
img.style.display="block"
}
r.readAsDataURL(f)
})

function gerar(){
let t=`
Paciente ${nome.value}, ${idade.value} anos, ASA ${asa.value}.
Procedimento: ${procedimento.value}.

Comorbidades: ${has.value} ${dm.value} ${cardio.value} ${pneumo.value} ${saos.value}.
Medicações: ${uso.value} ${anticoag.value} ${glp1.value}.
Via aérea: Mallampati ${mallampati.value}.

Condição: ${condicao.value}.
Conduta: ${recom.value}.
`
document.getElementById("wizard").classList.remove("active")
document.getElementById("resumo").classList.add("active")
document.getElementById("texto").value=t
}

function copy(){
navigator.clipboard.writeText(document.getElementById("texto").value)
alert("Copiado")
}
</script>

</body>
</html>