<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prévia</title>

<style>
body{
  margin:0;
  font-family:-apple-system,system-ui;
  background:linear-gradient(180deg,#284a78,#0f2747);
  color:white;
}

.container{
  max-width:420px;
  margin:auto;
  padding:20px;
}

.card{
  background:rgba(255,255,255,0.08);
  padding:20px;
  border-radius:18px;
  backdrop-filter:blur(8px);
  margin-bottom:20px;
}

h1,h2{
  text-align:center;
  margin-bottom:20px;
}

input,select,textarea{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  margin-bottom:14px;
  font-size:15px;
}

textarea{
  min-height:80px;
}

button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:14px;
  font-size:16px;
  margin-top:10px;
  cursor:pointer;
}

.primary{
  background:rgba(255,255,255,0.2);
  color:white;
}

.secondary{
  background:rgba(255,255,255,0.1);
  color:white;
}

#resumoBox{
  display:none;
}
</style>

</head>
<body>

<div class="container">

<h1>Prévia</h1>

<div class="card">

<label>Paciente</label>
<input id="nome">

<label>Idade</label>
<input id="idade">

<label>Procedimento</label>
<input id="procedimento">

<label>ASA</label>
<select id="asa">
<option>I</option>
<option>II</option>
<option>III</option>
<option>IV</option>
</select>

<label>Comorbidades</label>
<input id="comorb">

<label>Medicações</label>
<input id="meds">

<label>GLP-1</label>
<input id="glp1">

<label>Anticoagulante</label>
<input id="anticoag">

<label>Jejum (h)</label>
<input id="jejum">

<label>Mallampati</label>
<select id="mallampati">
<option>I</option>
<option>II</option>
<option>III</option>
<option>IV</option>
</select>

<label>Tipo anestésico</label>
<select id="tipo">
<option>Geral</option>
<option>Raqui</option>
<option>Sedação</option>
</select>

<label>Conduta</label>
<textarea id="conduta"></textarea>

<label>Status</label>
<select id="status">
<option>Apto</option>
<option>Apto com ressalvas</option>
<option>Adiar</option>
</select>

<label>Foto do paciente</label>
<input type="file" id="foto" accept="image/*">

<button class="primary" onclick="gerarResumo()">Gerar PDF</button>

</div>

<div id="resumoBox" class="card">
<h2>Resumo anestésico</h2>
<div id="textoResumo"></div>
</div>

</div>

<script>
function gerarResumo(){

const nome = document.getElementById("nome").value;
const idade = document.getElementById("idade").value;
const proc = document.getElementById("procedimento").value;
const asa = document.getElementById("asa").value;
const comorb = document.getElementById("comorb").value;
const meds = document.getElementById("meds").value;
const glp1 = document.getElementById("glp1").value;
const anticoag = document.getElementById("anticoag").value;
const jejum = document.getElementById("jejum").value;
const mall = document.getElementById("mallampati").value;
const tipo = document.getElementById("tipo").value;
const conduta = document.getElementById("conduta").value;
const status = document.getElementById("status").value;

let texto =
`Paciente: ${nome}, ${idade} anos
Procedimento: ${proc}

ASA ${asa}
Mallampati ${mall}
Jejum ${jejum} h

Comorbidades: ${comorb}
Medicações: ${meds}

GLP-1: ${glp1}
Anticoagulante: ${anticoag}

Conduta: ${conduta}

STATUS: ${status}`;

document.getElementById("textoResumo").innerText = texto;
document.getElementById("resumoBox").style.display="block";

gerarPDF(nome,idade,proc,asa,comorb,meds,glp1,anticoag,jejum,mall,tipo,conduta,status);
}

function gerarPDF(nome,idade,proc,asa,comorb,meds,glp1,anticoag,jejum,mall,tipo,conduta,status){

const file = document.getElementById("foto").files[0];
const reader = new FileReader();

reader.onload = function(){

const img = reader.result;

const w = window.open("");

w.document.write(`
<html>
<head>
<style>
body{font-family:Arial;margin:0}
.page{
width:794px;
height:1123px;
padding:60px;
box-sizing:border-box;
page-break-after:always;
}

.capa{
background:#0f2747;
color:white;
text-align:center;
}

.foto{
width:180px;
height:180px;
border-radius:100px;
object-fit:cover;
margin-top:40px;
}

.logo{
font-size:34px;
letter-spacing:8px;
margin-top:40px;
}

.titulo{
margin-top:80px;
font-size:28px;
}

.bloco{
margin-top:40px;
line-height:1.6;
}

h2{margin-top:0}
</style>
</head>
<body>

<div class="page capa">
<div class="logo">PRÉVIA</div>
<img src="${img}" class="foto">
<div class="titulo">${nome}</div>
<div>${proc}</div>
</div>

<div class="page">
<h2>Estratégia anestésica</h2>

<div class="bloco">
<b>Classificação</b><br>
ASA ${asa}<br>
Mallampati ${mall}<br>
Jejum ${jejum} h
</div>

<div class="bloco">
<b>Comorbidades</b><br>
${comorb}
</div>

<div class="bloco">
<b>Medicações</b><br>
${meds}<br>
GLP-1: ${glp1}<br>
Anticoagulante: ${anticoag}
</div>

<div class="bloco">
<b>Técnica proposta</b><br>
${tipo}
</div>

<div class="bloco">
<b>Conduta</b><br>
${conduta}
</div>

<div class="bloco">
<b>Status</b><br>
${status}
</div>

</div>

</body>
</html>
`);

w.document.close();
w.print();
}

if(file) reader.readAsDataURL(file);
else alert("Selecione a foto do paciente");

}
</script>

</body>
</html>